---
layout: default
js:
  - /assets/vendor/knockout-latest.js
  - /assets/vendor/math.js
  - /assets/vendor/chart.umd.js
  - /assets/js/knockout.chart.js
  - /assets/js/turbos.js
  - /assets/js/util.js
  - /assets/js/main.js
---
<div class="container-fluid p-2 m-0 row h100">
    <div class="p-2 col-lg-7 col-md-9 col-sm-12 h100 scrollable">
        <div class="p-4 mb-3 rounded-3">
            <h4 class="mb-2">Engine Specs</h4>
            <label for="engDispl">Displacement:</label>
            <span class="input-group">
                <input class="form-control form-control-sm" type="number" data-bind="value: engineDisplacementRaw" min="0.1" step="0.1">
                <select class="input-group-text btn-secondary" data-bind="value: engineDisplacementUnit">
                    <option value="L">L</option>
                    <option value="cuin">Cu.In</option>
                </select>
            </span>
            <div class="mt-2">
                <label for="mapSelect">Turbo:</label>
                <select class="form-control form-control-sm" data-bind="value: turbo, options: turboList, optionsText: 'name'"></select>
            </div>
            <h4 class="mt-3 mb-2">Boost Curve</h4>
            <table class="table table-sm table-striped" id="boost-data-table">
                <thead><tr>
                    <th>RPM</th>
                    <th>PSI</th>
                    <th>VE%</th>
                    <th>AFR</th>
                    <th>TER</th>
                    <th></th>
                </tr></thead>
                <tbody>
                    <!-- ko foreach: { data: boostCurve, as: 'el' } -->
                    <tr>
                        <td><input class="form-control form-control-sm" data-bind="value: rpm" type="number" min="0" step="500" /></td>
                        <td><input class="form-control form-control-sm" data-bind="value: psi" type="number" min="0" step="1" /></td>
                        <td><input class="form-control form-control-sm" data-bind="value: ve" type="number" min="0" step="1" /></td>>
                        <td><input class="form-control form-control-sm" data-bind="value: afr" type="number" min="0" step="0.1" /></td>>
                        <td><input class="form-control form-control-sm" data-bind="value: ter" type="number" min="1" step="0.1" /></td>
                        <td>
                            <button class="btn btn-sm btn-primary" data-bind="click: $parent.insertBoostDataRowAbove"><i class="bi bi-box-arrow-in-up"></i></button>
                            <button class="btn btn-sm btn-primary" data-bind="click: $parent.insertBoostDataRowBelow"><i class="bi bi-box-arrow-in-down"></i></button>
                            <button class="btn btn-sm btn-danger" data-bind="click: $parent.removeBoostDataRow"><i class="bi bi-trash-fill"></i></button>
                        </td>
                    </tr>
                    <!-- /ko -->
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td><button class="btn btn-sm btn-success" data-bind="click: addBoostDataRow">Add Row <i class="bi bi-plus"></i></button></td>
                    </tr>
                </tbody>
            </table>

            <h4 class="mt-3 mb-2">Environment</h4>
            <label for="altitude">Altitude:</label>
            <span class="input-group" id="altitude-input-group">
                <input type="number" class="form-control form-control-sm" data-bind="value: altitudeRaw" step="100" />
                <select class="input-group-text btn-secondary" data-bind="value: altitudeUnit">
                    <option value="m">m</option>
                    <option value="ft">ft</option>
                </select>
            </span>

            <label for="temp-input-group">Temperature Range:</label>
            <span class="input-group" id="temp-input-group">
                <input class="form-control form-control-sm" type="number" data-bind="value: ambientTempMinRaw" />
                <span class="input-group-text">To</span>
                <input class="form-control form-control-sm" type="number" data-bind="value: ambientTempMaxRaw" />
                <select class="input-group-text btn-secondary" data-bind="value: ambientTempUnit">
                    <option value="degC">&deg;C</option>
                    <option value="degF">&deg;F</option>
                    <option value="K">&deg;K</option>
                </select>
            </span>
        </div>
    </div>

    <div class="p-2 col-lg-5 col-md-3 col-sm-12 h100 scrollable">
        <h4 class="mt-3 mb-2">Compressor Map</h4>
        <div class="chart-holder mb-3" id="map-collapse">
            <canvas class="chart-canvas" data-bind="chart: compressorChart"></canvas>
        </div>

        <h4 class="mt-3 mb-2">Exhaust Flow Chart</h4>
        <div class="chart-holder" id="flow-collapse">
            <canvas class="chart-canvas" data-bind="chart: exhaustFlowChart"></canvas>
        </div>

        <h4 class="mt-3 mb-2">Air Flow Curves</h4>
        <div class="chart-holder mb-3" id="boost-collapse">
            <canvas class="chart-canvas" data-bind="chart: boostCurveChart"></canvas>
        </div>

        <h4 class="mt-3 mb-2">Estimated Power</h4>
        <div class="chart-holder mb-3" id="power-collapse">
            <canvas class="chart-canvas" data-bind="chart: powerCurveChart"></canvas>
        </div>
    </div>
</div>
