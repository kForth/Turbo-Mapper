---
layout: default
js:
  - /assets/vendor/knockout-latest.js
  - /assets/vendor/math.js
  - /assets/vendor/chart.umd.js
  - /assets/js/knockout.chart.js
  - /assets/js/turbos.js
  - /assets/js/util.js
  - /assets/js/units.js
  - /assets/js/main.js
---
<div class="container-fluid p-2 m-0 row h100">
    <div class="p-2 col-xl-8 col-lg-7 col-md-9 col-sm-12 h100 scrollable">
        <div class="p-4 mb-3 rounded-3">
            <h4 class="mt-3 mb-2">Environment</h4>
            <div class="row">
                <div class="col-6">
                    <label for="altitude">Altitude:</label>
                    <span class="input-group input-group-sm" id="altitude-input-group input-group-sm">
                        <input type="number" class="form-control form-control-sm" data-bind="value: altitudeRaw" step="100" />
                        <select class="input-group-text btn-secondary" data-bind="value: altitudeUnit, options: UNITS.altitude, optionsText: 'label', optionsValue: 'value'"></select>
                    </span>
                </div>
                <div class="col-6">
                    <label for="altitude">Ambient Pressure:</label>
                    <span class="input-group input-group-sm" id="altitude-input-group input-group-sm">
                        <input type="number" class="form-control form-control-sm" data-bind="converted: ambientPressure_Pa, from: 'Pa', to: ambientPressureDisplayUnit().value, precision: ambientPressureDisplayUnit().precision" readonly disabled />
                        <select class="input-group-text btn-secondary" data-bind="value: ambientPressureDisplayUnit, options: UNITS.pressure, optionsText: 'label'"></select>
                    </span>
                </div>
            </div>

            <label for="temp-input-group input-group-sm">Temperature Range:</label>
            <span class="input-group input-group-sm" id="temp-input-group input-group-sm">
                <input class="form-control form-control-sm" type="number" data-bind="value: ambientTempMinRaw" />
                <span class="input-group-text">To</span>
                <input class="form-control form-control-sm" type="number" data-bind="value: ambientTempMaxRaw" />
                <select class="input-group-text btn-secondary" data-bind="value: ambientTempUnit, options: UNITS.temperature, optionsText: 'label', optionsValue: 'value'"></select>
            </span>

            <h4 class="mb-2">Engine Specs</h4>
            <div class="row">
                <div class="col-6">
                    <label for="engDispl">Displacement:</label>
                    <span class="input-group input-group-sm">
                        <input class="form-control form-control-sm" type="number" data-bind="value: engineDisplacementRaw" min="0.1" step="0.1">
                        <select class="input-group-text btn-secondary" data-bind="value: engineDisplacementUnit, options: UNITS.volume, optionsText: 'label', optionsValue: 'value'"></select>
                    </span>
                </div>
                <div class="col-6">
                    <label for="engDispl"># Turbos:</label>
                    <input class="form-control form-control-sm" type="number" data-bind="value: numberOfTurbos" min="1" step="1">
                </div>
            </div>

            <div class="mt-2">
                <label for="mapSelect">Turbo:</label>
                <select class="form-control form-control-sm" data-bind="value: turbo, options: turboList, optionsText: 'name'"></select>
            </div>

            <h4 class="mt-3 mb-2">Inputs</h4>
            <table class="table table-sm table-striped" id="boost-data-table">
                <thead><tr>
                    <th></th>
                    <!-- ko foreach: boostCurve -->
                    <th data-bind="text: '#' + ($index() + 1)"></th>
                    <!-- /ko -->
                </tr></thead>
                <tbody>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Engine Speed</span>
                            <span class="input-group-text">RPM</span>
                        </div></td>
                        <!-- ko foreach: boostCurve -->
                        <td><input class="form-control form-control-sm" data-bind="value: rpm" type="number" min="0" step="500" /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Boost Pressure</span>
                            <span class="input-group-text">psi</span>
                        </div></td>
                        <!-- ko foreach: boostCurve -->
                        <td><input class="form-control form-control-sm" data-bind="value: psi" type="number" min="0" step="1" /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Volumetric Efficiency</span>
                            <span class="input-group-text">%</span>
                        </div></td>
                        <!-- ko foreach: boostCurve -->
                        <td><input class="form-control form-control-sm" data-bind="value: ve" type="number" min="0" step="1" /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Intercooler Efficiency</span>
                            <span class="input-group-text">%</span>
                        </div></td>
                        <!-- ko foreach: boostCurve -->
                        <td><input class="form-control form-control-sm" data-bind="value: ie" type="number" min="1" max="100" step="0.1" /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Air-to-Fuel Ratio</span>
                            <span class="input-group-text">n:1</span>
                        </div></td>
                        <!-- ko foreach: boostCurve -->
                        <td><input class="form-control form-control-sm" data-bind="value: afr" type="number" min="0" step="0.1" /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Turbine Expansion Ratio</span>
                            <!-- <span class="input-group-text">n:1</span> -->
                        </div></td>
                        <!-- ko foreach: boostCurve -->
                        <td><input class="form-control form-control-sm" data-bind="value: ter" type="number" min="1" step="0.1" /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td></td>
                        <!-- ko foreach: boostCurve -->
                        <td><div class="input-group flex-nowrap justify-content-end">
                            <button class="btn btn-sm btn-primary" data-bind="click: $parent.insertBoostDataRowAbove" title="Insert Col Left"><i class="bi bi-box-arrow-in-left"></i></button>
                            <button class="btn btn-sm btn-primary border-start" data-bind="click: $parent.insertBoostDataRowBelow" title="Insert Col Right"><i class="bi bi-box-arrow-in-right"></i></button>
                            <button class="btn btn-sm btn-danger border-start" data-bind="click: $parent.removeBoostDataRow" title="Delete Col"><i class="bi bi-trash-fill"></i></button>
                        </div></td>
                        <!-- /ko -->
                    </tr>
                </tbody>
            </table>

            <h4 class="mt-3 mb-2">Manifold Values</h4>
            <table class="table table-sm table-striped" id="boost-data-table">
                <thead><tr>
                    <th></th>
                    <!-- ko foreach: compressorData -->
                    <th data-bind="text: '#' + ($index() + 1)"></th>
                    <!-- /ko -->
                </tr></thead>
                <tbody>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Engine Speed</span>
                            <span class="input-group-text">RPM</span>
                        </div></td>
                        <!-- ko foreach: compressorData -->
                        <td><input class="form-control form-control-sm" data-bind="value: rpm" disabled readonly /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Absolute Pressure</span>
                            <select class="input-group-text btn-secondary" data-bind="value: resultAmbientPressureUnit, options: UNITS.pressure, optionsText: 'label'"></select>
                        </div></td>
                        <!-- ko foreach: compressorData -->
                        <td><input class="form-control form-control-sm" data-bind="converted: absolutePressure__psi, from: 'psi', to: $root.resultAmbientPressureUnit().value, precision: $root.resultAmbientPressureUnit().precision" disabled readonly /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Air Temperature</span>
                            <select class="input-group-text btn-secondary" data-bind="value: resultAirTemperatureUnit, options: UNITS.temperature, optionsText: 'label'"></select>
                        </div></td>
                        <!-- ko foreach: compressorData -->
                        <td><input class="form-control form-control-sm" data-bind="converted: airTemp_maxTemp__C, from: 'degC', to: $root.resultAirTemperatureUnit().value, precision: $root.resultAirTemperatureUnit().precision" disabled readonly /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Air Density</span>
                            <select class="input-group-text btn-secondary" data-bind="value: resultAirDensityUnit, options: UNITS.density, optionsText: 'label'"></select>
                        </div></td>
                        <!-- ko foreach: compressorData -->
                        <td><input class="form-control form-control-sm" data-bind="converted: airDensity_maxTemp__lb_cf, from: 'lb/ft^3', to: $root.resultAirDensityUnit().value, precision: $root.resultAirDensityUnit().precision" disabled readonly /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Air Mass Flow</span>
                            <select class="input-group-text btn-secondary" data-bind="value: resultAirMassFlowUnit, options: UNITS.massFlow, optionsText: 'label'"></select>
                        </div></td>
                        <!-- ko foreach: compressorData -->
                        <td><input class="form-control form-control-sm" data-bind="converted: massFlow_maxTemp__lb_min, from: 'lb/min', to: $root.resultAirMassFlowUnit().value, precision: $root.resultAirMassFlowUnit().precision" disabled readonly /></td>
                        <!-- /ko -->
                    </tr>
                    <tr>
                        <td><div class="input-group input-group-sm flex-nowrap">
                            <span class="input-group-text flex-fill">Air Flow</span>
                            <select class="input-group-text btn-secondary" data-bind="value: resultAirVolFlowUnit, options: UNITS.volumetricFlow, optionsText: 'label'"></select>
                        </div></td>
                        <!-- ko foreach: compressorData -->
                        <td><input class="form-control form-control-sm" data-bind="converted: airFlow__m3_s, from: 'm^3/s', to: $root.resultAirVolFlowUnit().value, precision: $root.resultAirVolFlowUnit().precision" disabled readonly /></td>
                        <!-- /ko -->
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="p-2 col-xl-4 col-lg-5 col-md-3 col-sm-12 h100 scrollable">
        <h4 class="mt-3 mb-2">Compressor Map</h4>
        <div class="chart-holder mb-3" id="map-collapse">
            <canvas class="chart-canvas" data-bind="chart: compressorChart"></canvas>
        </div>

        <h4 class="mt-3 mb-2">Exhaust Flow Chart</h4>
        <div class="chart-holder" id="flow-collapse">
            <canvas class="chart-canvas" data-bind="chart: exhaustFlowChart"></canvas>
        </div>

        <h4 class="mt-3 mb-2">Air Flow Curves</h4>
        <div class="chart-holder mb-3" id="boost-collapse">
            <canvas class="chart-canvas" data-bind="chart: boostCurveChart"></canvas>
        </div>

        <h4 class="mt-3 mb-2">Estimated Power</h4>
        <div class="chart-holder mb-3" id="power-collapse">
            <canvas class="chart-canvas" data-bind="chart: powerCurveChart"></canvas>
        </div>
    </div>
</div>
